<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Maharashtra Saral Seva Bharti</title>
  <style>
    *{box-sizing:border-box;font-family:Arial, sans-serif}
    body{background:#fffdf8;padding:12px;color:#222}
    h2{color:#e65100;text-align:center}
    form{max-width:700px;margin:10px auto;background:#fff;padding:12px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.06)}
    input,textarea,select{width:100%;padding:8px;margin-bottom:8px;border:1px solid #ddd;border-radius:6px}
    .row{display:flex;gap:8px}
    .row .col{flex:1}
    button{background:#ff6d00;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
    .muted{color:#666;font-size:0.9rem}
    .list{max-width:700px;margin:12px auto}
    .item{background:#fff;padding:10px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.04);margin-bottom:8px}
    .actions{margin-top:6px}
    .danger{background:#d32f2f}
  </style>
</head>
<body>
  <h2>Admin Panel — Job & PDF Management</h2>

  <form id="authForm">
    <input id="passwd" type="password" placeholder="Enter Admin Password" required>
    <button type="submit">Unlock Admin</button>
    <div class="muted">Admin Password already set to the value you chose.</div>
  </form>

  <div id="adminArea" style="display:none">

    <form id="jobForm">
      <h3>Add New Job</h3>
      <input id="jobTitle" placeholder="Job Title" required>
      <textarea id="jobDesc" placeholder="Short description" required></textarea>
      <div class="row">
        <div class="col"><input id="jobDate" placeholder="Last Date (e.g. 20 Nov 2025)" required></div>
        <div class="col"><button id="addJobBtn" type="button">Add Job</button></div>
      </div>
    </form>

    <form id="pdfForm">
      <h3>Add PDF (URL or Upload)</h3>
      <input id="pdfTitle" placeholder="PDF Title" required>
      <input id="pdfDesc" placeholder="Short description">
      <input id="pdfUrl" placeholder="PDF URL (or leave empty to upload file)">
      <input id="pdfFile" type="file" accept="application/pdf">
      <div class="row">
        <div class="col"><button id="addPdfBtn" type="button">Add PDF</button></div>
        <div class="col"><button id="clearStorage" type="button" style="background:#888">Clear Local Storage</button></div>
      </div>
      <div class="muted">Note: Upload stores PDF as data URL in browser localStorage — works but not ideal for large files. For persistent hosting, upload PDFs to GitHub/Drive and paste URL.</div>
    </form>

    <div class="list">
      <h3>Existing Jobs</h3>
      <div id="jobsList"></div>
      <h3>Existing PDFs</h3>
      <div id="pdfsList"></div>
    </div>
  </div>

  <script>
    const ADMIN_PASS='Pass@100'; // set by you
    const authForm=document.getElementById('authForm');
    const adminArea=document.getElementById('adminArea');

    authForm.addEventListener('submit',e=>{
      e.preventDefault();
      const p=document.getElementById('passwd').value;
      if(p!==ADMIN_PASS){alert('Wrong password');return}
      authForm.style.display='none'; adminArea.style.display='block'; loadAll();
    });

    // Helpers
    function saveJobs(j){ localStorage.setItem('ms_jobs',JSON.stringify(j)); }
    function savePdfs(p){ localStorage.setItem('ms_pdfs',JSON.stringify(p)); }
    function getJobs(){ return JSON.parse(localStorage.getItem('ms_jobs')||'null') || [] }
    function getPdfs(){ return JSON.parse(localStorage.getItem('ms_pdfs')||'null') || [] }

    // Add Job
    document.getElementById('addJobBtn').addEventListener('click',()=>{
      const t=document.getElementById('jobTitle').value.trim();
      const d=document.getElementById('jobDesc').value.trim();
      const ld=document.getElementById('jobDate').value.trim();
      if(!t||!d||!ld){alert('Fill all fields');return}
      const list=getJobs(); list.unshift({title:t,desc:d,lastDate:ld}); saveJobs(list); renderJobs(); document.getElementById('jobForm').reset();
    });

    // Add PDF (URL or Upload)
    document.getElementById('addPdfBtn').addEventListener('click',()=>{
      const title=document.getElementById('pdfTitle').value.trim();
      const desc=document.getElementById('pdfDesc').value.trim();
      const url=document.getElementById('pdfUrl').value.trim();
      const file=document.getElementById('pdfFile').files[0];
      if(!title){alert('Enter title');return}
      if(url){ // prefer URL
        const list=getPdfs(); list.unshift({title:title,desc:desc,link:url}); savePdfs(list); renderPdfs(); document.getElementById('pdfForm').reset(); return;
      }
      if(file){
        const reader=new FileReader();
        reader.onload=function(e){
          const dataUrl=e.target.result;
          const list=getPdfs(); list.unshift({title:title,desc:desc,link:dataUrl}); savePdfs(list); renderPdfs(); document.getElementById('pdfForm').reset();
        };
        reader.readAsDataURL(file);
        return;
      }
      alert('Provide a PDF URL or choose a file to upload');
    });

    // Clear local storage (for PDFs and jobs)
    document.getElementById('clearStorage').addEventListener('click',()=>{
      if(!confirm('Delete all saved jobs & PDFs from this browser?')) return;
      localStorage.removeItem('ms_jobs'); localStorage.removeItem('ms_pdfs'); loadAll(); alert('Cleared');
    });

    // Render lists with delete
    function renderJobs(){
      const el=document.getElementById('jobsList'); el.innerHTML='';
      const list=getJobs(); if(!list.length){el.innerHTML='<div class="muted">No jobs saved</div>';return}
      list.forEach((j,i)=>{
        const d=document.createElement('div'); d.className='item';
        d.innerHTML=`<strong>${escapeHtml(j.title)}</strong><div class="small">${escapeHtml(j.desc)}</div><div class="small">${escapeHtml(j.lastDate)}</div>`;
        const act=document.createElement('div'); act.className='actions';
        const del=document.createElement('button'); del.textContent='Delete'; del.style.marginRight='6px'; del.onclick=()=>{ if(confirm('Delete this job?')){ list.splice(i,1); saveJobs(list); renderJobs(); }};
        act.appendChild(del);
        d.appendChild(act); el.appendChild(d);
      })
    }

    function renderPdfs(){
      const el=document.getElementById('pdfsList'); el.innerHTML='';
      const list=getPdfs(); if(!list.length){el.innerHTML='<div class="muted">No PDFs saved</div>';return}
      list.forEach((p,i)=>{
        const d=document.createElement('div'); d.className='item';
        const link = p.link ? (p.link.startsWith('data:') ? '<em>(uploaded file)</em>' : `<a href="${p.link}" target="_blank">Open</a>`) : '';
        d.innerHTML=`<strong>${escapeHtml(p.title)}</strong><div class="small">${escapeHtml(p.desc)}</div><div class="small">${link}</div>`;
        const del=document.createElement('button'); del.textContent='Delete'; del.className='danger'; del.style.marginTop='6px'; del.onclick=()=>{ if(confirm('Delete this PDF?')){ list.splice(i,1); savePdfs(list); renderPdfs(); }};
        d.appendChild(del); el.appendChild(d);
      })
    }

    function loadAll(){ renderJobs(); renderPdfs(); }
    function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c])); }
  </script>
</body>
</html>
